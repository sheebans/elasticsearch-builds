<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (9-Ubuntu) on Mon Feb 12 16:57:43 IST 2018 -->
<title>RecoveryTarget (server 6.3.0-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="date" content="2018-02-12">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-1.10.2.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="RecoveryTarget (server 6.3.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/elasticsearch/indices/recovery/RecoveryState.VerifyIndex.html" title="class in org.elasticsearch.indices.recovery"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html" title="interface in org.elasticsearch.indices.recovery"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/elasticsearch/indices/recovery/RecoveryTarget.html" target="_top">Frames</a></li>
<li><a href="RecoveryTarget.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><span>SEARCH:&nbsp;</span>
<input type="text" id="search" value=" " disabled="disabled">
<input type="reset" id="reset" value=" " disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="../../../../org/elasticsearch/indices/recovery/package-summary.html">org.elasticsearch.indices.recovery</a></div>
<h2 title="Class RecoveryTarget" class="title">Class RecoveryTarget</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../../org/elasticsearch/common/util/concurrent/AbstractRefCounted.html" title="class in org.elasticsearch.common.util.concurrent">org.elasticsearch.common.util.concurrent.AbstractRefCounted</a></li>
<li>
<ul class="inheritance">
<li>org.elasticsearch.indices.recovery.RecoveryTarget</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../../../../org/elasticsearch/common/util/concurrent/RefCounted.html" title="interface in org.elasticsearch.common.util.concurrent">RefCounted</a></code>, <code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html" title="interface in org.elasticsearch.indices.recovery">RecoveryTargetHandler</a></code></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">RecoveryTarget</span>
extends <a href="../../../../org/elasticsearch/common/util/concurrent/AbstractRefCounted.html" title="class in org.elasticsearch.common.util.concurrent">AbstractRefCounted</a>
implements <a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html" title="interface in org.elasticsearch.indices.recovery">RecoveryTargetHandler</a></pre>
<div class="block">Represents a recovery where the current node is the target node of the recovery. To track recoveries in a central place, instances of
 this class are created through <a href="../../../../org/elasticsearch/indices/recovery/RecoveriesCollection.html" title="class in org.elasticsearch.indices.recovery"><code>RecoveriesCollection</code></a>.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#RecoveryTarget-org.elasticsearch.index.shard.IndexShard-org.elasticsearch.cluster.node.DiscoveryNode-org.elasticsearch.indices.recovery.PeerRecoveryTargetService.RecoveryListener-java.util.function.LongConsumer-">RecoveryTarget</a></span>&#8203;(<a href="../../../../org/elasticsearch/index/shard/IndexShard.html" title="class in org.elasticsearch.index.shard">IndexShard</a>&nbsp;indexShard,
              <a href="../../../../org/elasticsearch/cluster/node/DiscoveryNode.html" title="class in org.elasticsearch.cluster.node">DiscoveryNode</a>&nbsp;sourceNode,
              <a href="../../../../org/elasticsearch/indices/recovery/PeerRecoveryTargetService.RecoveryListener.html" title="interface in org.elasticsearch.indices.recovery">PeerRecoveryTargetService.RecoveryListener</a>&nbsp;listener,
              java.util.function.LongConsumer&nbsp;ensureClusterStateVersionCallback)</code></th>
<td class="colLast">
<div class="block">Creates a new recovery target object that represents a recovery to the provided shard.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#cancel-java.lang.String-">cancel</a></span>&#8203;(java.lang.String&nbsp;reason)</code></th>
<td class="colLast">
<div class="block">cancel the recovery.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../org/elasticsearch/common/util/CancellableThreads.html" title="class in org.elasticsearch.common.util">CancellableThreads</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#cancellableThreads--">cancellableThreads</a></span>&#8203;()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#cleanFiles-int-org.elasticsearch.index.store.Store.MetadataSnapshot-">cleanFiles</a></span>&#8203;(int&nbsp;totalTranslogOps,
          <a href="../../../../org/elasticsearch/index/store/Store.MetadataSnapshot.html" title="class in org.elasticsearch.index.store">Store.MetadataSnapshot</a>&nbsp;sourceMetaData)</code></th>
<td class="colLast">
<div class="block">After all source files has been sent over, this command is sent to the target so it can clean any local
 files that are not part of the source store</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#closeInternal--">closeInternal</a></span>&#8203;()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#ensureClusterStateVersion-long-">ensureClusterStateVersion</a></span>&#8203;(long&nbsp;clusterStateVersion)</code></th>
<td class="colLast">
<div class="block">Blockingly waits for cluster state with at least clusterStateVersion to be available</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#fail-org.elasticsearch.indices.recovery.RecoveryFailedException-boolean-">fail</a></span>&#8203;(<a href="../../../../org/elasticsearch/indices/recovery/RecoveryFailedException.html" title="class in org.elasticsearch.indices.recovery">RecoveryFailedException</a>&nbsp;e,
    boolean&nbsp;sendShardFailure)</code></th>
<td class="colLast">
<div class="block">fail the recovery and call listener</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#finalizeRecovery-long-">finalizeRecovery</a></span>&#8203;(long&nbsp;globalCheckpoint)</code></th>
<td class="colLast">
<div class="block">The finalize request refreshes the engine now that new segments are available, enables garbage collection of tombstone files, and
 updates the global checkpoint.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>org.apache.lucene.store.IndexOutput</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#getOpenIndexOutput-java.lang.String-">getOpenIndexOutput</a></span>&#8203;(java.lang.String&nbsp;key)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#getTempNameForFile-java.lang.String-">getTempNameForFile</a></span>&#8203;(java.lang.String&nbsp;origFile)</code></th>
<td class="colLast">
<div class="block">Get a temporary name for the provided file name.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#handoffPrimaryContext-org.elasticsearch.index.seqno.ReplicationTracker.PrimaryContext-">handoffPrimaryContext</a></span>&#8203;(<a href="../../../../org/elasticsearch/index/seqno/ReplicationTracker.PrimaryContext.html" title="class in org.elasticsearch.index.seqno">ReplicationTracker.PrimaryContext</a>&nbsp;primaryContext)</code></th>
<td class="colLast">
<div class="block">Handoff the primary context between the relocation source and the relocation target.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../../../org/elasticsearch/index/shard/IndexShard.html" title="class in org.elasticsearch.index.shard">IndexShard</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#indexShard--">indexShard</a></span>&#8203;()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#indexTranslogOperations-java.util.List-int-">indexTranslogOperations</a></span>&#8203;(java.util.List&lt;<a href="../../../../org/elasticsearch/index/translog/Translog.Operation.html" title="interface in org.elasticsearch.index.translog">Translog.Operation</a>&gt;&nbsp;operations,
                       int&nbsp;totalTranslogOps)</code></th>
<td class="colLast">
<div class="block">Index a set of translog operations on the target</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#lastAccessTime--">lastAccessTime</a></span>&#8203;()</code></th>
<td class="colLast">
<div class="block">return the last time this RecoveryStatus was used (based on System.nanoTime()</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#markAsDone--">markAsDone</a></span>&#8203;()</code></th>
<td class="colLast">
<div class="block">mark the current recovery as done</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#notifyListener-org.elasticsearch.indices.recovery.RecoveryFailedException-boolean-">notifyListener</a></span>&#8203;(<a href="../../../../org/elasticsearch/indices/recovery/RecoveryFailedException.html" title="class in org.elasticsearch.indices.recovery">RecoveryFailedException</a>&nbsp;e,
              boolean&nbsp;sendShardFailure)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>org.apache.lucene.store.IndexOutput</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#openAndPutIndexOutput-java.lang.String-org.elasticsearch.index.store.StoreFileMetaData-org.elasticsearch.index.store.Store-">openAndPutIndexOutput</a></span>&#8203;(java.lang.String&nbsp;fileName,
                     <a href="../../../../org/elasticsearch/index/store/StoreFileMetaData.html" title="class in org.elasticsearch.index.store">StoreFileMetaData</a>&nbsp;metaData,
                     <a href="../../../../org/elasticsearch/index/store/Store.html" title="class in org.elasticsearch.index.store">Store</a>&nbsp;store)</code></th>
<td class="colLast">
<div class="block">Creates an <code>IndexOutput</code> for the given file name.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#prepareForTranslogOperations-boolean-int-">prepareForTranslogOperations</a></span>&#8203;(boolean&nbsp;createNewTranslog,
                            int&nbsp;totalTranslogOps)</code></th>
<td class="colLast">
<div class="block">Implementation of <a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html" title="interface in org.elasticsearch.indices.recovery"><code>RecoveryTargetHandler</code></a></div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#receiveFileInfo-java.util.List-java.util.List-java.util.List-java.util.List-int-">receiveFileInfo</a></span>&#8203;(java.util.List&lt;java.lang.String&gt;&nbsp;phase1FileNames,
               java.util.List&lt;java.lang.Long&gt;&nbsp;phase1FileSizes,
               java.util.List&lt;java.lang.String&gt;&nbsp;phase1ExistingFileNames,
               java.util.List&lt;java.lang.Long&gt;&nbsp;phase1ExistingFileSizes,
               int&nbsp;totalTranslogOps)</code></th>
<td class="colLast">
<div class="block">Notifies the target of the files it is going to receive</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#recoveryId--">recoveryId</a></span>&#8203;()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>org.apache.lucene.store.IndexOutput</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#removeOpenIndexOutputs-java.lang.String-">removeOpenIndexOutputs</a></span>&#8203;(java.lang.String&nbsp;name)</code></th>
<td class="colLast">
<div class="block">remove and <code>IndexOutput</code> for a given file.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#renameAllTempFiles--">renameAllTempFiles</a></span>&#8203;()</code></th>
<td class="colLast">
<div class="block">renames all temporary files to their true name, potentially overriding existing files</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html" title="class in org.elasticsearch.indices.recovery">RecoveryTarget</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#retryCopy--">retryCopy</a></span>&#8203;()</code></th>
<td class="colLast">
<div class="block">Returns a fresh recovery target to retry recovery from the same source node onto the same shard and using the same listener.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#setLastAccessTime--">setLastAccessTime</a></span>&#8203;()</code></th>
<td class="colLast">
<div class="block">sets the lasAccessTime flag to now</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code><a href="../../../../org/elasticsearch/index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#shardId--">shardId</a></span>&#8203;()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code><a href="../../../../org/elasticsearch/cluster/node/DiscoveryNode.html" title="class in org.elasticsearch.cluster.node">DiscoveryNode</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#sourceNode--">sourceNode</a></span>&#8203;()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryState.Stage.html" title="enum in org.elasticsearch.indices.recovery">RecoveryState.Stage</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#stage--">stage</a></span>&#8203;()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryState.html" title="class in org.elasticsearch.indices.recovery">RecoveryState</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#state--">state</a></span>&#8203;()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code><a href="../../../../org/elasticsearch/index/store/Store.html" title="class in org.elasticsearch.index.store">Store</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#store--">store</a></span>&#8203;()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#toString--">toString</a></span>&#8203;()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#writeFileChunk-org.elasticsearch.index.store.StoreFileMetaData-long-org.elasticsearch.common.bytes.BytesReference-boolean-int-">writeFileChunk</a></span>&#8203;(<a href="../../../../org/elasticsearch/index/store/StoreFileMetaData.html" title="class in org.elasticsearch.index.store">StoreFileMetaData</a>&nbsp;fileMetaData,
              long&nbsp;position,
              <a href="../../../../org/elasticsearch/common/bytes/BytesReference.html" title="class in org.elasticsearch.common.bytes">BytesReference</a>&nbsp;content,
              boolean&nbsp;lastChunk,
              int&nbsp;totalTranslogOps)</code></th>
<td class="colLast">
<div class="block">writes a partial file chunk to the target store</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.elasticsearch.common.util.concurrent.AbstractRefCounted">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.elasticsearch.common.util.concurrent.<a href="../../../../org/elasticsearch/common/util/concurrent/AbstractRefCounted.html" title="class in org.elasticsearch.common.util.concurrent">AbstractRefCounted</a></h3>
<code><a href="../../../../org/elasticsearch/common/util/concurrent/AbstractRefCounted.html#alreadyClosed--">alreadyClosed</a>, <a href="../../../../org/elasticsearch/common/util/concurrent/AbstractRefCounted.html#decRef--">decRef</a>, <a href="../../../../org/elasticsearch/common/util/concurrent/AbstractRefCounted.html#getName--">getName</a>, <a href="../../../../org/elasticsearch/common/util/concurrent/AbstractRefCounted.html#incRef--">incRef</a>, <a href="../../../../org/elasticsearch/common/util/concurrent/AbstractRefCounted.html#refCount--">refCount</a>, <a href="../../../../org/elasticsearch/common/util/concurrent/AbstractRefCounted.html#tryIncRef--">tryIncRef</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="RecoveryTarget-org.elasticsearch.index.shard.IndexShard-org.elasticsearch.cluster.node.DiscoveryNode-org.elasticsearch.indices.recovery.PeerRecoveryTargetService.RecoveryListener-java.util.function.LongConsumer-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>RecoveryTarget</h4>
<pre>public&nbsp;RecoveryTarget&#8203;(<a href="../../../../org/elasticsearch/index/shard/IndexShard.html" title="class in org.elasticsearch.index.shard">IndexShard</a>&nbsp;indexShard,
                      <a href="../../../../org/elasticsearch/cluster/node/DiscoveryNode.html" title="class in org.elasticsearch.cluster.node">DiscoveryNode</a>&nbsp;sourceNode,
                      <a href="../../../../org/elasticsearch/indices/recovery/PeerRecoveryTargetService.RecoveryListener.html" title="interface in org.elasticsearch.indices.recovery">PeerRecoveryTargetService.RecoveryListener</a>&nbsp;listener,
                      java.util.function.LongConsumer&nbsp;ensureClusterStateVersionCallback)</pre>
<div class="block">Creates a new recovery target object that represents a recovery to the provided shard.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>indexShard</code> - local shard where we want to recover to</dd>
<dd><code>sourceNode</code> - source node of the recovery where we recover from</dd>
<dd><code>listener</code> - called when recovery is completed/failed</dd>
<dd><code>ensureClusterStateVersionCallback</code> - callback to ensure that the current node is at least on a cluster state with the provided
                                          version; necessary for primary relocation so that new primary knows about all other ongoing
                                          replica recoveries when replicating documents (see <a href="../../../../org/elasticsearch/indices/recovery/RecoverySourceHandler.html" title="class in org.elasticsearch.indices.recovery"><code>RecoverySourceHandler</code></a>)</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="retryCopy--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>retryCopy</h4>
<pre>public&nbsp;<a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html" title="class in org.elasticsearch.indices.recovery">RecoveryTarget</a>&nbsp;retryCopy&#8203;()</pre>
<div class="block">Returns a fresh recovery target to retry recovery from the same source node onto the same shard and using the same listener.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a copy of this recovery target</dd>
</dl>
</li>
</ul>
<a name="recoveryId--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recoveryId</h4>
<pre>public&nbsp;long&nbsp;recoveryId&#8203;()</pre>
</li>
</ul>
<a name="shardId--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shardId</h4>
<pre>public&nbsp;<a href="../../../../org/elasticsearch/index/shard/ShardId.html" title="class in org.elasticsearch.index.shard">ShardId</a>&nbsp;shardId&#8203;()</pre>
</li>
</ul>
<a name="indexShard--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>indexShard</h4>
<pre>public&nbsp;<a href="../../../../org/elasticsearch/index/shard/IndexShard.html" title="class in org.elasticsearch.index.shard">IndexShard</a>&nbsp;indexShard&#8203;()</pre>
</li>
</ul>
<a name="sourceNode--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sourceNode</h4>
<pre>public&nbsp;<a href="../../../../org/elasticsearch/cluster/node/DiscoveryNode.html" title="class in org.elasticsearch.cluster.node">DiscoveryNode</a>&nbsp;sourceNode&#8203;()</pre>
</li>
</ul>
<a name="state--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>state</h4>
<pre>public&nbsp;<a href="../../../../org/elasticsearch/indices/recovery/RecoveryState.html" title="class in org.elasticsearch.indices.recovery">RecoveryState</a>&nbsp;state&#8203;()</pre>
</li>
</ul>
<a name="cancellableThreads--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cancellableThreads</h4>
<pre>public&nbsp;<a href="../../../../org/elasticsearch/common/util/CancellableThreads.html" title="class in org.elasticsearch.common.util">CancellableThreads</a>&nbsp;cancellableThreads&#8203;()</pre>
</li>
</ul>
<a name="lastAccessTime--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastAccessTime</h4>
<pre>public&nbsp;long&nbsp;lastAccessTime&#8203;()</pre>
<div class="block">return the last time this RecoveryStatus was used (based on System.nanoTime()</div>
</li>
</ul>
<a name="setLastAccessTime--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLastAccessTime</h4>
<pre>public&nbsp;void&nbsp;setLastAccessTime&#8203;()</pre>
<div class="block">sets the lasAccessTime flag to now</div>
</li>
</ul>
<a name="store--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>store</h4>
<pre>public&nbsp;<a href="../../../../org/elasticsearch/index/store/Store.html" title="class in org.elasticsearch.index.store">Store</a>&nbsp;store&#8203;()</pre>
</li>
</ul>
<a name="stage--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stage</h4>
<pre>public&nbsp;<a href="../../../../org/elasticsearch/indices/recovery/RecoveryState.Stage.html" title="enum in org.elasticsearch.indices.recovery">RecoveryState.Stage</a>&nbsp;stage&#8203;()</pre>
</li>
</ul>
<a name="renameAllTempFiles--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>renameAllTempFiles</h4>
<pre>public&nbsp;void&nbsp;renameAllTempFiles&#8203;()
                        throws java.io.IOException</pre>
<div class="block">renames all temporary files to their true name, potentially overriding existing files</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="cancel-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cancel</h4>
<pre>public&nbsp;void&nbsp;cancel&#8203;(java.lang.String&nbsp;reason)</pre>
<div class="block">cancel the recovery. calling this method will clean temporary files and release the store
 unless this object is in use (in which case it will be cleaned once all ongoing users call
 <a href="../../../../org/elasticsearch/common/util/concurrent/AbstractRefCounted.html#decRef--"><code>AbstractRefCounted.decRef()</code></a>
 <p>
 if <a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#cancellableThreads--"><code>cancellableThreads()</code></a> was used, the threads will be interrupted.</div>
</li>
</ul>
<a name="fail-org.elasticsearch.indices.recovery.RecoveryFailedException-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fail</h4>
<pre>public&nbsp;void&nbsp;fail&#8203;(<a href="../../../../org/elasticsearch/indices/recovery/RecoveryFailedException.html" title="class in org.elasticsearch.indices.recovery">RecoveryFailedException</a>&nbsp;e,
                 boolean&nbsp;sendShardFailure)</pre>
<div class="block">fail the recovery and call listener</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>e</code> - exception that encapsulating the failure</dd>
<dd><code>sendShardFailure</code> - indicates whether to notify the master of the shard failure</dd>
</dl>
</li>
</ul>
<a name="notifyListener-org.elasticsearch.indices.recovery.RecoveryFailedException-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>notifyListener</h4>
<pre>public&nbsp;void&nbsp;notifyListener&#8203;(<a href="../../../../org/elasticsearch/indices/recovery/RecoveryFailedException.html" title="class in org.elasticsearch.indices.recovery">RecoveryFailedException</a>&nbsp;e,
                           boolean&nbsp;sendShardFailure)</pre>
</li>
</ul>
<a name="markAsDone--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markAsDone</h4>
<pre>public&nbsp;void&nbsp;markAsDone&#8203;()</pre>
<div class="block">mark the current recovery as done</div>
</li>
</ul>
<a name="getTempNameForFile-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTempNameForFile</h4>
<pre>public&nbsp;java.lang.String&nbsp;getTempNameForFile&#8203;(java.lang.String&nbsp;origFile)</pre>
<div class="block">Get a temporary name for the provided file name.</div>
</li>
</ul>
<a name="getOpenIndexOutput-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOpenIndexOutput</h4>
<pre>public&nbsp;org.apache.lucene.store.IndexOutput&nbsp;getOpenIndexOutput&#8203;(java.lang.String&nbsp;key)</pre>
</li>
</ul>
<a name="removeOpenIndexOutputs-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeOpenIndexOutputs</h4>
<pre>public&nbsp;org.apache.lucene.store.IndexOutput&nbsp;removeOpenIndexOutputs&#8203;(java.lang.String&nbsp;name)</pre>
<div class="block">remove and <code>IndexOutput</code> for a given file. It is the caller's responsibility to close it</div>
</li>
</ul>
<a name="openAndPutIndexOutput-java.lang.String-org.elasticsearch.index.store.StoreFileMetaData-org.elasticsearch.index.store.Store-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openAndPutIndexOutput</h4>
<pre>public&nbsp;org.apache.lucene.store.IndexOutput&nbsp;openAndPutIndexOutput&#8203;(java.lang.String&nbsp;fileName,
                                                                 <a href="../../../../org/elasticsearch/index/store/StoreFileMetaData.html" title="class in org.elasticsearch.index.store">StoreFileMetaData</a>&nbsp;metaData,
                                                                 <a href="../../../../org/elasticsearch/index/store/Store.html" title="class in org.elasticsearch.index.store">Store</a>&nbsp;store)
                                                          throws java.io.IOException</pre>
<div class="block">Creates an <code>IndexOutput</code> for the given file name. Note that the
 IndexOutput actually point at a temporary file.
 <p>
 Note: You can use <a href="../../../../org/elasticsearch/indices/recovery/RecoveryTarget.html#getOpenIndexOutput-java.lang.String-"><code>getOpenIndexOutput(String)</code></a> with the same filename to retrieve the same IndexOutput
 at a later stage</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="closeInternal--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeInternal</h4>
<pre>protected&nbsp;void&nbsp;closeInternal&#8203;()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/elasticsearch/common/util/concurrent/AbstractRefCounted.html#closeInternal--">closeInternal</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/elasticsearch/common/util/concurrent/AbstractRefCounted.html" title="class in org.elasticsearch.common.util.concurrent">AbstractRefCounted</a></code></dd>
</dl>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString&#8203;()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</li>
</ul>
<a name="prepareForTranslogOperations-boolean-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepareForTranslogOperations</h4>
<pre>public&nbsp;void&nbsp;prepareForTranslogOperations&#8203;(boolean&nbsp;createNewTranslog,
                                         int&nbsp;totalTranslogOps)
                                  throws java.io.IOException</pre>
<div class="block">Implementation of <a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html" title="interface in org.elasticsearch.indices.recovery"><code>RecoveryTargetHandler</code></a></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html#prepareForTranslogOperations-boolean-int-">prepareForTranslogOperations</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html" title="interface in org.elasticsearch.indices.recovery">RecoveryTargetHandler</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>createNewTranslog</code> - whether or not to delete the local translog on the target</dd>
<dd><code>totalTranslogOps</code> - total translog operations expected to be sent</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="finalizeRecovery-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalizeRecovery</h4>
<pre>public&nbsp;void&nbsp;finalizeRecovery&#8203;(long&nbsp;globalCheckpoint)
                      throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html#finalizeRecovery-long-">RecoveryTargetHandler</a></code></span></div>
<div class="block">The finalize request refreshes the engine now that new segments are available, enables garbage collection of tombstone files, and
 updates the global checkpoint.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html#finalizeRecovery-long-">finalizeRecovery</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html" title="interface in org.elasticsearch.indices.recovery">RecoveryTargetHandler</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>globalCheckpoint</code> - the global checkpoint on the recovery source</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="ensureClusterStateVersion-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ensureClusterStateVersion</h4>
<pre>public&nbsp;void&nbsp;ensureClusterStateVersion&#8203;(long&nbsp;clusterStateVersion)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html#ensureClusterStateVersion-long-">RecoveryTargetHandler</a></code></span></div>
<div class="block">Blockingly waits for cluster state with at least clusterStateVersion to be available</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html#ensureClusterStateVersion-long-">ensureClusterStateVersion</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html" title="interface in org.elasticsearch.indices.recovery">RecoveryTargetHandler</a></code></dd>
</dl>
</li>
</ul>
<a name="handoffPrimaryContext-org.elasticsearch.index.seqno.ReplicationTracker.PrimaryContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>handoffPrimaryContext</h4>
<pre>public&nbsp;void&nbsp;handoffPrimaryContext&#8203;(<a href="../../../../org/elasticsearch/index/seqno/ReplicationTracker.PrimaryContext.html" title="class in org.elasticsearch.index.seqno">ReplicationTracker.PrimaryContext</a>&nbsp;primaryContext)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html#handoffPrimaryContext-org.elasticsearch.index.seqno.ReplicationTracker.PrimaryContext-">RecoveryTargetHandler</a></code></span></div>
<div class="block">Handoff the primary context between the relocation source and the relocation target.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html#handoffPrimaryContext-org.elasticsearch.index.seqno.ReplicationTracker.PrimaryContext-">handoffPrimaryContext</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html" title="interface in org.elasticsearch.indices.recovery">RecoveryTargetHandler</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>primaryContext</code> - the primary context from the relocation source</dd>
</dl>
</li>
</ul>
<a name="indexTranslogOperations-java.util.List-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>indexTranslogOperations</h4>
<pre>public&nbsp;long&nbsp;indexTranslogOperations&#8203;(java.util.List&lt;<a href="../../../../org/elasticsearch/index/translog/Translog.Operation.html" title="interface in org.elasticsearch.index.translog">Translog.Operation</a>&gt;&nbsp;operations,
                                    int&nbsp;totalTranslogOps)
                             throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html#indexTranslogOperations-java.util.List-int-">RecoveryTargetHandler</a></code></span></div>
<div class="block">Index a set of translog operations on the target</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html#indexTranslogOperations-java.util.List-int-">indexTranslogOperations</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html" title="interface in org.elasticsearch.indices.recovery">RecoveryTargetHandler</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>operations</code> - operations to index</dd>
<dd><code>totalTranslogOps</code> - current number of total operations expected to be indexed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the local checkpoint on the target shard</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="receiveFileInfo-java.util.List-java.util.List-java.util.List-java.util.List-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiveFileInfo</h4>
<pre>public&nbsp;void&nbsp;receiveFileInfo&#8203;(java.util.List&lt;java.lang.String&gt;&nbsp;phase1FileNames,
                            java.util.List&lt;java.lang.Long&gt;&nbsp;phase1FileSizes,
                            java.util.List&lt;java.lang.String&gt;&nbsp;phase1ExistingFileNames,
                            java.util.List&lt;java.lang.Long&gt;&nbsp;phase1ExistingFileSizes,
                            int&nbsp;totalTranslogOps)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html#receiveFileInfo-java.util.List-java.util.List-java.util.List-java.util.List-int-">RecoveryTargetHandler</a></code></span></div>
<div class="block">Notifies the target of the files it is going to receive</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html#receiveFileInfo-java.util.List-java.util.List-java.util.List-java.util.List-int-">receiveFileInfo</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html" title="interface in org.elasticsearch.indices.recovery">RecoveryTargetHandler</a></code></dd>
</dl>
</li>
</ul>
<a name="cleanFiles-int-org.elasticsearch.index.store.Store.MetadataSnapshot-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cleanFiles</h4>
<pre>public&nbsp;void&nbsp;cleanFiles&#8203;(int&nbsp;totalTranslogOps,
                       <a href="../../../../org/elasticsearch/index/store/Store.MetadataSnapshot.html" title="class in org.elasticsearch.index.store">Store.MetadataSnapshot</a>&nbsp;sourceMetaData)
                throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html#cleanFiles-int-org.elasticsearch.index.store.Store.MetadataSnapshot-">RecoveryTargetHandler</a></code></span></div>
<div class="block">After all source files has been sent over, this command is sent to the target so it can clean any local
 files that are not part of the source store</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html#cleanFiles-int-org.elasticsearch.index.store.Store.MetadataSnapshot-">cleanFiles</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html" title="interface in org.elasticsearch.indices.recovery">RecoveryTargetHandler</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>totalTranslogOps</code> - an update number of translog operations that will be replayed later on</dd>
<dd><code>sourceMetaData</code> - meta data of the source store</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="writeFileChunk-org.elasticsearch.index.store.StoreFileMetaData-long-org.elasticsearch.common.bytes.BytesReference-boolean-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>writeFileChunk</h4>
<pre>public&nbsp;void&nbsp;writeFileChunk&#8203;(<a href="../../../../org/elasticsearch/index/store/StoreFileMetaData.html" title="class in org.elasticsearch.index.store">StoreFileMetaData</a>&nbsp;fileMetaData,
                           long&nbsp;position,
                           <a href="../../../../org/elasticsearch/common/bytes/BytesReference.html" title="class in org.elasticsearch.common.bytes">BytesReference</a>&nbsp;content,
                           boolean&nbsp;lastChunk,
                           int&nbsp;totalTranslogOps)
                    throws java.io.IOException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html#writeFileChunk-org.elasticsearch.index.store.StoreFileMetaData-long-org.elasticsearch.common.bytes.BytesReference-boolean-int-">RecoveryTargetHandler</a></code></span></div>
<div class="block">writes a partial file chunk to the target store</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html#writeFileChunk-org.elasticsearch.index.store.StoreFileMetaData-long-org.elasticsearch.common.bytes.BytesReference-boolean-int-">writeFileChunk</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html" title="interface in org.elasticsearch.indices.recovery">RecoveryTargetHandler</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/elasticsearch/indices/recovery/RecoveryState.VerifyIndex.html" title="class in org.elasticsearch.indices.recovery"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/elasticsearch/indices/recovery/RecoveryTargetHandler.html" title="interface in org.elasticsearch.indices.recovery"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/elasticsearch/indices/recovery/RecoveryTarget.html" target="_top">Frames</a></li>
<li><a href="RecoveryTarget.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
